(this.webpackJsonptimer=this.webpackJsonptimer||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(64),c=n.n(s),i=(n(76),n(20)),l=n.n(i),o=n(42),u=n(5),p=n(14),m=n.n(p),f=n(43),d=n.n(f),v=n(27),h=n(26),w=n(136),g=function(e){var t=Object(a.useState)({step:1}),n=Object(u.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)([]),l=Object(u.a)(i,2),o=l[0],p=l[1],f=e.ticketsList,d=Object(a.useState)([]),g=Object(u.a)(d,2),b=g[0],k=g[1],E=o,O=[];console.log(E);var j=s.step,y=[],T=[];0!==e.mainTickets.length&&(f=e.mainTickets);for(var _=0;_<f.length;_++){var x={id:_,price:f[_].price,company:"//pics.avs.io/99/36/{".concat(f[_].carrier,"}.png"),forward:"".concat(f[_].segments[0].origin,"-").concat(f[_].segments[0].destination),toward:"".concat(f[_].segments[1].origin,"-").concat(f[_].segments[0].destination),timeForward:f[_].segments[0].duration,timeToward:f[_].segments[1].duration,stepsForward:f[_].segments[0].stops.length,stepsToward:f[_].segments[1].stops.length,stepsForwardCities:f[_].segments[0].stops.join("-"),stepsTowardCities:f[_].segments[1].stops.join("-"),filter:Number(f[_].segments[0].stops.length+f[_].segments[1].stops.length)};T.push(x)}var F=T.filter((function(e){return e.stepsForward+e.stepsToward===j}));if(E.length>1){var A=T.filter((function(e){return e.filter===E[0]-1})).slice(0,3);F=T.filter((function(e){return e.filter===E[E.length-1]-1})).slice(0,2).concat(A)}if(E.length>2){var C=T.filter((function(e){return e.filter===E[0]-1})).slice(0,2),S=T.filter((function(e){return e.filter===E[E.length-1]-1})).slice(0,1).concat(C);F=T.filter((function(e){return e.filter===E[E.length-2]-1})).slice(0,2).concat(S)}j>3&&(F=T.filter((function(e){return e.stepsForward+e.stepsToward<=j})));for(var N=0;N<5;N++)y.push(F[N]);b.length>0&&(y=b);var B=y.filter((function(e){return void 0!==e}));return 0!==T.length?r.a.createElement("div",{className:m.a.body},r.a.createElement("ul",{className:m.a.ul},[{key:1,id:1,value:"\u0411\u0435\u0437 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a",steps:0},{key:2,id:2,value:"1 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430",steps:1},{key:3,id:3,value:"2 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438",steps:2},{key:4,id:4,value:"3 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438",steps:3},{key:5,id:5,value:"\u0412\u0441\u0435",steps:5}].map((function(t){return r.a.createElement("li",{key:t.key},r.a.createElement(w.a,{onClick:function(){return function(t){f=e.mainTickets,k([]);var n=o.indexOf(t);O=Object(h.a)(o),-1===n?O.push(t):O.splice(n,1),p(O);var a=O.sort((function(e,t){return t-e}));0===a.length&&(a[0]=1),c(Object(v.a)({},s,{step:a[0]-1}))}(t.id)},checked:-1!==o.indexOf(t.id)},t.value))}))),r.a.createElement("div",{className:m.a.wrapper},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){c(Object(v.a)({},s,{step:j}));var e=Object(h.a)(b);e=y.sort((function(e,t){return e.price-t.price})),k(e)}},r.a.createElement("p",null,"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439")),r.a.createElement("button",{onClick:function(){c(Object(v.a)({},s,{step:j}));var e=Object(h.a)(b);e=y.sort((function(e,t){return e.timeForward+e.timeToward-(t.timeForward+t.timeToward)})),k(e)}},r.a.createElement("p",null,"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))),B.map((function(e){return r.a.createElement("div",{key:e.id,className:m.a.ticketsArea},r.a.createElement("ul",null,r.a.createElement("li",null,e.price),r.a.createElement("li",null,e.toward)),r.a.createElement("ul",null,r.a.createElement("li",null,e.timeForward),r.a.createElement("li",null,e.timeToward)),r.a.createElement("ul",null,r.a.createElement("li",null,e.stepsForward),r.a.createElement("li",null,e.stepsToward)),r.a.createElement("ul",null,r.a.createElement("li",null,e.stepsForwardCities),r.a.createElement("li",null,e.stepsTowardCities),r.a.createElement("li",null,r.a.createElement("img",{src:e.company,alt:""}))))})))):"please wait"},b=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),i=Object(u.a)(c,2),p=i[0],m=i[1],f=Object(a.useState)([]),v=Object(u.a)(f,2),h=v[0],w=v[1],b=[];!0===p&&0===b.length&&(b=h);var k=[];if(0!==h.length)for(var E=0;E<50;E++)k.push(h[E]);return Object(a.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()("https://front-test.beta.aviasales.ru/search");case 2:t=e.sent,s(t.data.searchId);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=function(){var t=Object(o.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===n){t.next=12;break}return t.prev=1,t.next=4,d()("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(n));case 4:a=t.sent,m(a.data.stop),w(h.concat(a.data.tickets)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),"Request failed with status code 500"===t.t0.message&&e();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();!1===p&&e()}),[n,p,h]),r.a.createElement(g,{ticketsList:k,mainTickets:b})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},14:function(e,t,n){e.exports={body:"App_body__ZTvxg",ul:"App_ul__241OB",ticketsArea:"App_ticketsArea__2vWHl",wrapper:"App_wrapper__2Rh_f"}},71:function(e,t,n){e.exports=n(134)},76:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.4046c57b.chunk.js.map